/******************************************************************************
**  FILENAME:       debug.h
**
**  PURPOSE:        
**  LAST MODIFIED:  2019.03
******************************************************************************/ 
#ifndef  __DBGU_H__
#define  __DBGU_H__

#include <stdbool.h>
#include "stm32f1xx.h"

/*
*********************************************************************************************************
*                                               EXTERNS
*********************************************************************************************************
*/

#ifdef   DEBUG_GLOBALS
#define  DEBUG_EXT
#else
#define  DEBUG_EXT  extern
#endif


/*
*********************************************************************************************************
*                                               DEFINES
*********************************************************************************************************
*/
#define	CMD_BUF_SIZE		128

typedef struct	_COMMAND 
{
	int		flag;
	const char	*cmd_str;
	int		argc;
	int		(*cmd)(uint8_t);
	const char	**help_str;
} COMMAND;


/*
*********************************************************************************************************
*                                          GLOBAL VARIABLES
*********************************************************************************************************
*/

DEBUG_EXT	uint8_t arg_c;
DEBUG_EXT	char *arg_v[20];
DEBUG_EXT	volatile char Cmd[CMD_BUF_SIZE];

/*
*********************************************************************************************************
*                                               MACRO'S
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                                            FUNCTION PROTOTYPES
*********************************************************************************************************
*/
int get_cmd(uint8_t dport, char *Cmd);
int get_arg(char *args);
int exe_cmd(uint8_t dport);

//void debugTaskFunc(void);

#endif                                                          /* End of module include.                               */
